const extpay=ExtPay("unsubscriby-for-youtube");extpay.getUser().then((async e=>{const t=document.getElementById("btnStart"),n=document.getElementById("btnUpgradeCollapse"),o=document.getElementById("btnUpgrade"),a=document.querySelector("#alert-upgrade");a.querySelector(".span-subs-limit").innerText=CONSTANTS.LIMIT,o.addEventListener("click",extpay.openPaymentPage),e.paid&&(n.innerHTML='<i class="fas fa-crown" style="color: gold"></i> ...',o.innerHTML='<i class="fas fa-crown"></i> Manage Subscription',a.style.display="none"),t.addEventListener("click",(async()=>{chrome.runtime.sendMessage({message:"start"})}));!async function(){const e=document.querySelector(".messages"),t=document.querySelector("#alert-loading-placeholder-model");try{const o=await fetch("https://unsubscriby-for-yt-default-rtdb.firebaseio.com/messages.json"),a=await o.json();if(!a)return;const r=Object.keys(a).length;if(0==r)return;if(a.error)return;for(let n=0;n<r;n++){const n=t.cloneNode(!0);n.className+=" alert-loading-placeholder",n.style="display: block;",e.appendChild(n)}await(n=2e3,new Promise((e=>setTimeout(e,n))));const s=Object.keys(a).map((e=>({id:e,...a[e]})));for(m of s){const t=document.createElement("div");t.className="alert alert-info",t.innerHTML=m.content,e.appendChild(t)}const c=document.querySelectorAll(".alert-loading-placeholder");for(l of c)l.style="display: none;"}catch(e){return console.log(e.name),void console.log(e.message)}var n}(),async function(){const e=await chrome.management.getSelf();document.getElementById("ext-version").innerText=e.version}()})).catch((e=>{console.log(e),console.log("Error fetching data :( Check that your ExtensionPay id is correct and you're connected to the internet")}));
